<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>icafe咖啡馆</title>	
	<link rel="stylesheet" href="css/style.css" />
</head>
<body>



<div id="container">
 
  <div id="header">
  	<p>	<img src="images/headword3.png"></p>
  </div>
  
  <div id="nav">
  	    <p>
			<a href="#">方剂分析</a>|
			<a href="demo.html">病案分析</a>
		</p>
  </div>

  <div id="main"> 
	  <div id="aside">
	  	<h2>补益剂散点图</h2>

		  <style>

			chart{
			  font: 10px sans-serif;
			}
			
			.axis path,
			.axis line {
			  fill: none;
			  stroke: #000;
			  shape-rendering: crispEdges;
			}
			
			.dot {
			  stroke: #000;
			}
			
			.lasso path {
			  stroke: rgb(80,80,80);
			  stroke-width:2px;
			}
			
			.lasso .drawn {
			  fill-opacity:.05 ;
			}
			
			.lasso .loop_close {
			  fill:none;
			  stroke-dasharray: 4,4;
			}
			
			.lasso .origin {
			  fill:#3399FF;
			  fill-opacity:.5;
			}
			
			.not_possible {
			  fill:rgb(200,200,200);
			}
			
			.possible {
			  fill:#EC888C;
			}
			
			/* .text{
			  fill:rgb(63, 13, 226);
			} */
			
			</style>
			<body>
			<script src="https://d3js.org/d3.v3.min.js"></script>
			<script src = "http://axc.net/code_libraries/lasso/lasso.min.js"></script>
			<div id="chart"></div>
			<script>
			var color = d3.scale.category20();
			
			
			
			
			var margin = {top: 20, right: 20, bottom: 30, left: 40},
				width = 1060 - margin.left - margin.right,
				height = 600 - margin.top - margin.bottom;
			
			var x = d3.scale.linear()
				.range([0, width]);
			
			var y = d3.scale.linear()
				.range([height, 0]);
			
			// var color = d3.scale.category10();
			
			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");
			
			var yAxis = d3.svg.axis()
				.scale(y)
				.orient("left");
			
			
			    var tArray = new Array();  //先声明一维
			for(var k=0;k<20;k++){    //一维长度为i,i为变量，可以根据实际情况改变
			 
			tArray[k]=new Array();  //声明二维，每一个一维数组里面的一个元素都是一个数组；
			 
			for(var j=0;j<20;j++){   //一维数组里面每个元素数组可以包含的数量p，p也是一个变量；
			 
			tArray[k][j]="";    //这里将变量初始化，我这边统一初始化为空，后面在用所需的值覆盖里面的值
			 }
			}

            tArray[0]= ['四君子汤★', '人参', '白术', '茯苓', '甘草', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[1]= ['参苓白术散★', '人参', '白术', '茯苓', '莲子', '薏苡仁', '砂仁', '桔梗', '白扁豆', '甘草', '山药', '大枣', '', '', '', '', '', '', '', '']
			tArray[2]= ['补中益气汤★', '黄芪', '炙甘草', '人参', '当归', '陈皮', '升麻', '柴胡', '白术', '', '', '', '', '', '', '', '', '', '', '']
			tArray[3]= ['玉屏风散★', '黄芪', '防风', '白术', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[4]= ['生脉散★', '人参', '麦冬', '五味子', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[5]= ['完带汤★', '白术', '山药', '人参', '白芍', '车前子', '苍术', '甘草', '陈皮', '荆芥炭', '柴胡', '', '', '', '', '', '', '', '', '']
			tArray[6]= ['四物汤★', '熟地黄', '当归', '川芎', '白芍', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[7]= ['当归补血汤★', '黄芪', '当归', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[8]= ['归脾汤★', '黄芪', '龙眼肉', '白术', '茯神', '酸枣仁', '人参', '木香', '炙甘草', '当归', '远志', '', '', '', '', '', '', '', '', '']
			tArray[9]= ['八珍汤★', '人参', '熟地黄', '白术', '茯苓', '当归', '川芎', '白芍', '炙甘草', '生姜', '大枣', '', '', '', '', '', '', '', '', '']
			tArray[10]= ['炙甘草汤(复脉汤)★', '地黄', '炙甘草', '生姜', '人参', '桂枝', '阿胶', '麦冬', '火麻仁', '大枣', '', '', '', '', '', '', '', '', '', '']
			tArray[11]= ['六味地黄丸★', '熟地黄', '山茱萸', '山药', '泽泻', '牡丹皮', '茯苓', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[12]= ['左归丸', '熟地黄', '山药', '枸杞子', '山茱萸', '菟丝子', '鹿角胶', '龟甲胶', '牛膝', '', '', '', '', '', '', '', '', '', '', '']
			tArray[13]= ['大补阴丸★', '熟地黄', '龟甲', '黄柏', '知母', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[14]= ['一贯煎★', '地黄', '北沙参', '麦冬', '当归', '枸杞子', '川楝子', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[15]= ['肾气丸★', '地黄', '山药', '山茱萸', '泽泻', '茯苓', '牡丹皮', '桂枝', '附子', '', '', '', '', '', '', '', '', '', '', '']
			tArray[16]= ['右归丸', '附子', '肉桂', '鹿角胶', '熟地黄', '山药', '山茱萸', '枸杞子', '菟丝子', '杜仲', '当归', '', '', '', '', '', '', '', '', '']
			tArray[17]= ['地黄饮子★', '熟地黄', '肉苁蓉', '巴戟天', '山茱萸', '石斛', '附子', '五味子', '肉桂', '茯苓', '麦冬', '石菖蒲', '远志', '生姜', '大枣', '薄荷', '', '', '', '']
			tArray[18]= ['龟鹿二仙胶★', '鹿角胶', '龟甲胶', '人参', '枸杞子', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '']
			tArray[19]= ['七宝美髯丹', '何首乌', '茯苓', '牛膝', '当归', '枸杞子', '菟丝子', '补骨脂', '', '', '', '', '', '', '', '', '', '', '', '']
            // console.log(tArray)
			
			
			
			var svg = d3.select("#chart").append("svg")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
			  .append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
			
				var tipmargin = {top: 10, right: 30, bottom: 40, left: 50},
					tipwidth = 520 - tipmargin.left - tipmargin.right,
					tipheight = 520 - tipmargin.top - tipmargin.bottom;
			
				var tooltip = d3.select("#chart")
					.append("div")
					.style("opacity", 0)
					.attr("class", "tooltip")
					.style("background-color", "white")
					.style("border", "solid")
					.style("border-width", "2px")
					.style("width","1200px")
					.style("margin","5px 20px 5px 40px")
					.style("border-radius", "5px")
					.style("padding", "5px")
			// Lasso functions to execute while lassoing
			var lasso_start = function() {
			  lasso.items()
				.attr("r",5) // reset size
				.style("fill",null) // clear all of the fills
				.classed({"not_possible":true,"selected":false}); // style as not possible
			};
			
			var lasso_draw = function() {
			  // Style the possible dots
			  lasso.items().filter(function(d) {return d.possible===true})
				.classed({"not_possible":false,"possible":true});
			
			  // Style the not possible dot
			  lasso.items().filter(function(d) {return d.possible===false})
				.classed({"not_possible":true,"possible":false});
			};
			
			
			
			
			var lasso_end = function() {
			
			  // Reset the color of all dots
			  lasso.items()
				 .style("fill", function(d) { return color(d.herb); });
			
			  // Style the selected dots
			  lasso.items().filter(function(d) {return d.selected===true})
				.classed({"not_possible":false,"possible":false,"text":true})
				.attr("r",7);
			
			
			  // Reset the style of the not selected dots
			  lasso.items().filter(function(d) {return d.selected===false})
				.classed({"not_possible":false,"possible":false,"text":false})
				.attr("r",5);
			
			selectarray1=new Array();
			selectarray=new Array();
			selectarray1=d3.selectAll(".text")
			selectarray=selectarray1[0]
			// console.log(selectarray.length)
			
			// if(selectarray.length!=0)
			// {
			//   console.log(selectarray)
			//   console.log(selectarray[0].__data__.herb)
			// }
			
			fjarray=new Array();
			for( var i=0; i<selectarray.length; i++ )
				{
					fjarray[i]=selectarray[i].__data__.herb
				}
				 //console.log(fjarray)
			

			
			newfj=new Array();
			function isContainArr(parent, child) {
			  return child.every(item => {
				return parent.some(v => {
				  return item == v
				})
			  })
			}
			
			
			
			  for( var i=0; i<20; i++ )
			  {
				  if(isContainArr(tArray[i], fjarray)==true&&fjarray.length!=0){
					newfj.push(tArray[i][0])
				}
			  }
			//console.log("newfj:"+newfj)
			tooltip
			.html("可能的方剂为: "+newfj)
			// .style("left", (d3.mouse(this)[0]+70) + "px")
			// .style("top", (d3.mouse(this)[1]) + "px")
			// d3.select(this)
			// .style("stroke", "none")
			.style("opacity", 1)
			re=[newfj,fjarray]
			//console.log(re)
			return re
			
			};
			
			// Create the area where the lasso event can be triggered
			var lasso_area = svg.append("rect")
								  .attr("width",width)
								  .attr("height",height)
								  .style("opacity",0);
			
			// Define the lasso
			var lasso = d3.lasso()
				  .closePathDistance(75) // max distance for the lasso loop to be closed
				  .closePathSelect(true) // can items be selected by closing the path?
				  .hoverSelect(true) // can items by selected by hovering over them?
				  .area(lasso_area) // area where the lasso can be started
				  .on("start",lasso_start) // lasso start function
				  .on("draw",lasso_draw) // lasso draw function
				  .on("end",lasso_end); // lasso end function
			
			// Init the lasso on the svg:g that contains the dots
			svg.call(lasso);
			
			d3.csv("fangjidata0425.csv", function(error, data) {
			  data.forEach(function(d) {
				d.yy = +d.yy;
				d.xx = +d.xx;
			  });
			
			  x.domain(d3.extent(data, function(d) { return d.xx; })).nice();
			  y.domain(d3.extent(data, function(d) { return d.yy; })).nice();
			
			  svg.append("g")
				  .attr("class", "x axis")
				  .attr("transform", "translate(0," + height + ")")
				  .call(xAxis)
				.append("text")
				  .attr("class", "label")
				  .attr("x", width)
				  .attr("y", -6)
				  .style("text-anchor", "end")
				  .text("x");
			
			  svg.append("g")
				  .attr("class", "y axis")
				  .call(yAxis)
				.append("text")
				  .attr("class", "label")
				  .attr("transform", "rotate(-90)")
				  .attr("y", 6)
				  .attr("dy", ".71em")
				  .style("text-anchor", "end")
				  .text("y")
			
			  svg.selectAll(".dot")
				  .data(data)
				  .enter().append("circle")
				  .attr("id",function(d,i) {return "dot_" + i;}) // added
				  .attr("class", "dot")
				  .attr("r", 5)
				  .attr("cx", function(d) { return x(d.xx); })
				  .attr("cy", function(d) { return y(d.yy); })
				  .style("fill", function(d) { return d.rgb})
				  .append("title")
				  .text(function (d) { return d.properties});
			
				  svg.append("g")
				  .selectAll("dot")
					.data(data)
					.enter()
					.append('text')
					.attr("x", function (d) { return x(d.xx)+10 } )
					.attr("y", function (d) { return y(d.yy)+5 })
					.style('font-weight', 400)
					.style('font-size',13)
					.style('font-family', 'Arial')
					.style('fill', 'black')
					.text(function (d) { return d.herb})
			

			
			  lasso.items(d3.selectAll(".dot"));
		

			//   var ondiv=document.getElementById("aside");
			// 	ondiv.onclick=function(){ 
			// 	aa=lasso_end();
			// 	console.log(aa)
           //   }


			//   console.log(d3.selectAll(".dot"))
			//   console.log(d3.selectAll(".selected"))
			//  dotarray1=new Array();
			//  dotarray=new Array();
			//  dotarray1=d3.selectAll(".dot")
			//  dotarray=dotarray1[0]
			//  console.log(dotarray.length)
			
			// selectarray1=new Array();
			// selectarray=new Array();
			// selectarray1=d3.selectAll(".selected")
			// selectarray=selectarray1[0]
			// console.log(selectarray.length)
			
			
			
			// do{
			//   console.log(d3.selectAll(".selected"))
			// }
			// while(selectarray.length!=0)
			 
			  // console.log(d3.selectAll(".selected"))
			
			//   var legend = svg.selectAll(".legend")
			//       .data(color.domain())
			//     .enter().append("g")
			//       .attr("class", "legend")
			//       .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });
			
			//   legend.append("rect")
			//       .attr("x", width - 18)
			//       .attr("width", 18)
			//       .attr("height", 18)
			//       .style("fill", color);
			
			//   legend.append("text")
			//       .attr("x", width - 24)
			//       .attr("y", 9)
			//       .attr("dy", ".35em")
			//       .style("text-anchor", "end")
			//       .text(function(d) { return d; });
			
			});
			</script>
			</body>


		
	  </div>

	  <div id="content">
		<h2>补益剂树图</h2>
		<style>

			.node {
			  fill: #ddd;
			  stroke:red;
			}
			
			.label {
			  font: 15px sans-serif;
			  text-anchor: middle;

			}
			.fjlabel {
			  font: 11px sans-serif;
			  text-anchor: middle;

			}


			/* .highlight {
			  opacity: 0;
			  stroke:#3399FF
			  
			} */
			
			</style>

<div id="treechart"></div>
<script src="https://unpkg.com/textures@1.2.0/dist/textures.js"></script>
<script>

// var width = 960,
//     height = 500;
var treewidth = 990, treeheight = 600,labelhight=60
//var treewidth = 990, treeheight = 800,
 x = d3.scale.linear().range([0, width]),
 y = d3.scale.linear().range([0, height]);

var color = d3.scale.category20();
// var color = d3.scaleLinear()
//       .range(["white", "#69b3a2"])
//       .domain([1,100])


var svg0 = d3.select("#treechart").append("svg")
    .attr("width", treewidth)
    .attr("height", treeheight)
	.style("margin","0px 5px 0px 5px")

var partition = d3.layout.partition()
    .sort(null)
    .size([treewidth, treeheight])
    .value(function(d) { return d.size; });
    //.value(function(d) { return d.size; });

	var partition1 = d3.layout.partition()
    .sort(null)
    .size([treewidth, labelhight])
    .value(function(d) { return d.size; });

	var svg1 = d3.select("#treechart").append("svg")
		.attr("width", "990px")
    	.attr("height", "80px")
        .style("margin","0px 5px 0px 5px")

    var tooltip2 = d3.select("#treechart")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .style("margin","5px 10px 5px 10px")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("width","970px")
        .style("border-radius", "5px")
        .style("padding", "5px")


	var sel=d3.selectAll(".node")
	.style("stroke","blue")

    
    

    var mouseover = function(d) {
        tooltip2.style("opacity", 1)
        d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.5)}
      
      var mousemove = function(d) {
        tooltip2
          .html("可能的方剂为: " + d.fangji)
          .style("left", (d3.mouse(this)[0]+70) + "px")
          .style("top", (d3.mouse(this)[1]) + "px")
          d3.select(this)
      .style("stroke", "none")
      .style("opacity", 1)  
      }
      var mouseleave = function(d) {
        tooltip2.style("opacity", 0)
        d3.select(this)
      .style("stroke", "none")
      .style("opacity", 0.5)
      }



	  var mouseover2 = function(d) {
        tooltip2.style("opacity", 1)
        d3.select(this)
      .style("stroke", "blue")
	  .style("stroke-opacity",1)
      .style("opacity", 0.5)}
      
      var mousemove2 = function(d) {
        tooltip2
          .html("可能的方剂为: " + d.fangji)
          .style("left", (d3.mouse(this)[0]+70) + "px")
          .style("top", (d3.mouse(this)[1]) + "px")
          d3.select(this)
      .style("stroke", "blue")
	  .style("stroke-opacity",1)
      .style("opacity", 1)  
      }
      var mouseleave2 = function(d) {
        tooltip2.style("opacity", 0)
        d3.select(this)
      .style("stroke", "blue")
	  .style("stroke-opacity",1)
      .style("opacity", 0.5)
      }

	  var mouseover3 = function(d) {
        tooltip2.style("opacity", 1)
        d3.select(this)
		.style("opacity", 0.5)
		.style("stroke", "red")
		.style("stroke-width", 2)
		.style("stroke-dasharray","5,5")
	}
      
      var mousemove3 = function(d) {
        tooltip2
          .html("可能的方剂为: " + d.fangji)
          .style("left", (d3.mouse(this)[0]+70) + "px")
          .style("top", (d3.mouse(this)[1]) + "px")
          d3.select(this)
		  .style("opacity", 0.5)
		  .style("stroke", "red")
		  .style("stroke-width", 2)
		  .style("stroke-dasharray","5,5")
      }
      var mouseleave3 = function(d) {
        tooltip2.style("opacity", 0)
        d3.select(this)
		.style("opacity", 0.5)
		.style("stroke", "red")
		.style("stroke-width", 2)
		.style("stroke-dasharray","5,5")
      }
var ondiv=document.getElementById("aside");
d3.json("trysingles_tree.json", function(error, root) {
			  


  var nodes = partition.nodes(root);
  var links = partition.links(nodes)
  console.log(nodes)
  
//   console.log("newfj:"+newfj)
//   console.log(links)
  svg0.selectAll(".node")
      .data(nodes)
      .enter().append("rect")
	  .attr("id",function(d,i) {return "rec_" + i;}) // added
      .on("mouseover", mouseover)
      .on("mousemove", mousemove)
      .on("mouseleave", mouseleave)
      .attr("class", "node")
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("width", function(d) { return d.dx; })
      .attr("height", function(d) { return d.dy; })
      //.style("fill", function(d) { return color((d.children ? d : d.parent).name); });

      .style("fill", function(d) { return color(d.name2); })
      //.style("stroke-width", 4)
      .style("stroke", "none")
      .style("opacity", 0.5)

	  console.log(svg0.selectAll(".node"))
	

	  hh=svg0.selectAll(".node")
	  var recnode=hh.flat()
	  //console.log(recnode)
	  str=recnode[1].__data__. fangji
	  var n=str.split("、");
	  //console.log(n);


  svg0.selectAll(".label")
      .data(nodes.filter(function(d) { return d.dx > 6; }))
      .enter().append("text")
      .attr("class", "label")
      .attr("dy", ".35em")
      .style("fill", function(d) { return d.colour; })
      // .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")rotate(90)"; })
      .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")"; })
      .text(function(d) { return d.name; });
      



	  var ttArray = new Array();  //先声明一维
			for(var k=0;k<nodes.length;k++){    //一维长度为i,i为变量，可以根据实际情况改变
			 
			ttArray[k]=new Array();  //声明二维，每一个一维数组里面的一个元素都是一个数组；
			 
			for(var j=0;j<20;j++){   //一维数组里面每个元素数组可以包含的数量p，p也是一个变量；
			 
			ttArray[k][j]="";    //这里将变量初始化，我这边统一初始化为空，后面在用所需的值覆盖里面的值
			 }
			}
	for(var k=0;k<nodes.length;k++){
			str=recnode[k].__data__. fangji
			var n=str.split("、");
			ttArray[k]=n
			
		}
	//console.log(ttArray)
	function isContainArr(parent, child) {
			  return child.every(item => {
				return parent.some(v => {
				  return item == v
				})
			  })
			}

			var fjrecdata=[{fj:"生脉散★"},{fj:"四君子汤★"},{fj:"参苓白术散★"},{fj:'八珍汤★'},{fj:"当归补血汤★"},{fj:"玉屏风散★"},{fj:"补中益气汤★"},{fj:"归脾汤★"},{fj:"龟鹿二仙胶★"},{fj:"右归丸"},{fj:"一贯煎★"},{fj:'肾气丸★'},{fj:"炙甘草汤(复脉汤)★"},{fj:'七宝美髯丹'},{fj:'大补阴丸★'},{fj:'四物汤★'},{fj:"六味地黄丸★"},{fj:"左归丸"},{fj:"地黄饮子★"},{fj:"完带汤★"}]


svg1.selectAll(".fjnode")
      .data(fjrecdata)
      .enter().append("rect")
	  .attr("id",function(d,i) {return "fjrec_" + i;}) // added
      .attr("class", "fjnode")
      .attr("x", function(d,i) { return i*treewidth/20; })
      .attr("y",30)
      .attr("width", function(d) { return treewidth/20; })
      .attr("height", 50)
      .style("fill", "none")
	  .style("stroke", "blue")
	  .style("stroke-width", 1)

	  svg1.selectAll(".fjlabel")
	  .data(fjrecdata)
      .enter().append("text")
      .attr("class", "fjlabel")
      .attr("dy", ".35em")
	//   .attr("transform", function(d) { return "translate(" + (d.x + d.dx / 2) + "," + (d.y + d.dy / 2) + ")"; })
	  .attr("transform", function(d,i) { return "translate(" + (i*treewidth/20 + treewidth/40) + ",55)"; })
      .text(function(d) { return d.fj; })


	  ondiv.onclick=function(){ 
				aaaa=lasso_end();
				aa=aaaa[1]
				bb=aaaa[0]
				console.log(aa)		
				svg0.selectAll(".node")
				.data(nodes)
				.on("mouseover", mouseover)
      			.on("mousemove", mousemove)
      			.on("mouseleave", mouseleave)
				.style("stroke", "none")
				.style("fill", function(d) { return color(d.name2); })

				svg1.selectAll(".fjnode")
				.style("fill","none")
				
				var num2=0
				for(var p=0;p<bb.length;p++){
					bbb=[bb[p]]
					for(var k=1;k<nodes.length;k++){
						  if(isContainArr(ttArray[k], bbb)==true)
							{
							num2=num2+1
							for(var i=0;i<num2;i++){
							d3.select("#rec_"+k)
							.on("mouseover", mouseover3)
							.on("mousemove", mousemove3)
							.on("mouseleave", mouseleave3)
							.style("stroke", "red")
							.style("stroke-width", 2)
							.style("stroke-dasharray","5,5")
						}
							}
					}

				}
	
				nodek=[]
				var num=0
				for(var p=0;p<aa.length;p++){
					for(var k=0;k<nodes.length;k++){
				if(recnode[k].__data__. name2==aa[p]){
					num=num+1;
					
					for(var i=0;i<num;i++){
						//nodek.push(nodes[k])
						d3.select("#rec_"+k)
						.on("mouseover", mouseover2)
      					.on("mousemove", mousemove2)
      					.on("mouseleave", mouseleave2)
						.style("stroke", "blue")
						.style("stroke-width", 4)
						.style("stroke-opacity",1)
						.style("stroke-dasharray","5,0")
						//.style("fill", t.url())
					}					
				}
			}
				}	
				
		var num3=0
		for(var p=0;p<bb.length;p++){
			bbb=bb[p]
			console.log(bbb)
			for(var k=0;k<fjrecdata.length;k++){
					if(bbb==fjrecdata[k].fj)
					{
					num3=num3+1
					for(var i=0;i<num3;i++){
					//svg1.call(tt)
					d3.select("#fjrec_"+k)
					//.style("stroke", "red")
					.style("fill", "red")
				}
					}
			}

		}


			}

});




	//   ondiv2.onclick=function(){ 
	// 	aaaa=lasso_end();
	// 	aa=aaaa[1]
	// 	bb=aaaa[0]
	// 	console.log(bb)
	// 	console.log("hhhhhh")
	// 	console.log(fjnodes[1].fj)
	// 	console.log("hhhhhhia")


	// 	var num3=0
	// 	for(var p=0;p<bb.length;p++){
	// 		bbb=bb[p]
	// 		console.log(bbb)
	// 		for(var k=1;k<fjnodes.length;k++){
	// 				if(bbb==fjnodes[k].fj)
	// 				{
	// 				num3=num3+1
	// 				for(var i=0;i<num3;i++){
	// 				//svg1.call(tt)
	// 				d3.select("#fjrec_"+k)
	// 				//.style("stroke", "red")
	// 				.style("fill", "red")
	// 			}
	// 				}
	// 		}

	// 	}


	//   }




	




</script>


	  </div>
  </div>

  <div id="footer">
  	<p>2022毕业设计项目</p>
  </div>
</div>



</body>
</html>